<div>
  <app-sidebar></app-sidebar>

  <div class="lg:pl-72">

    <!-- Global notification live region, render this permanently at the end of the document -->


    <main class="py-10 bg-gray-100 heropattern-topography-gray-300/10">

      <div class="w-full  flex max-w-6xl mx-auto mb-10">
        <div>
          <img src="{{user.profilePicture}}" class="w-20 h-20 rounded-full" />
        </div>
        <div class="ml-4">
          <h1
            class="text-2xl font-bold animate-gradient bg-clip-text text-transparent bg-300% bg-gradient-to-r from-primary via-blue-500 to-blue-900">{{user.firstName}} {{user.lastName}}</h1>
          <p class="text-gray-500">{{user.role}}</p>
          <!-- <p class="text-gray-500">Joined 16 December 2020</p> -->

        </div>
      </div>




      <app-stories></app-stories>





      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">

        <div class="w-full bg-white rounded-lg">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

            <div class="flex justify-center items-center py-4">
              <img src="https://picsum.photos/id/237/200/300" class="w-10 h-10 mx-2 rounded-full" />

              <div (click)="visible = true"
                class="bg-gray-100 w-full rounded-lg border-0 px-3 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                What's on your mind, {{user.firstName}} {{user.lastName}}?
              </div>

            </div>
            <hr>
            <div class="flex justify-center items-center py-4 " >
              <div class="flex items-center mx-8 text-lg text-primary" (click)="visible = true">

                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-pencil-square" viewBox="0 0 16 16">
                  <path
                    d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                  <path fill-rule="evenodd"
                    d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z" />
                </svg>
                <p class="mx-2">Post</p>
              </div>
              <div class="flex items-center mx-8 text-lg text-yellow-500" (click)="visible = true">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-images"
                  viewBox="0 0 16 16">
                  <path d="M4.502 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" />
                  <path
                    d="M14.002 13a2 2 0 0 1-2 2h-10a2 2 0 0 1-2-2V5A2 2 0 0 1 2 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v8a2 2 0 0 1-1.998 2M14 2H4a1 1 0 0 0-1 1h9.002a2 2 0 0 1 2 2v7A1 1 0 0 0 15 11V3a1 1 0 0 0-1-1M2.002 4a1 1 0 0 0-1 1v8l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094l1.777 1.947V5a1 1 0 0 0-1-1z" />
                </svg>
                <p class="mx-2">Photo</p>
              </div>



              <div class="flex items-center mx-8 text-lg text-red-500" (click)="visible = true">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-calendar-event" viewBox="0 0 16 16">
                  <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5z" />
                  <path
                    d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z" />
                </svg>
                <p class="mx-2">Event</p>
              </div>

            </div>
          </div>

        </div>








        <div *ngFor="let post of posts" class="px-5 py-4 my-2 bg-white  shadow rounded-lg max-w-full">
          <div class="flex mb-4">
            <img class="w-12 h-12 rounded-full"
              src="{{post.author.profilePicture ? post.author.profilePicture : '../../../../../assets/profile.jpg'}}" >
            <div class="ml-2 mt-0.5">
              <span class="block font-medium text-base leading-snug text-black ">{{post.author.firstName}} {{post.author.lastName}}</span>
              <span class="block text-sm text-gray-500  font-light leading-snug">  {{ post.date | date: 'MMM d, y' }} {{ post.date | date: 'HH:mm' }}
              </span>
            </div>
          </div>
          <p class="text-gray-800  mb-8 leading-snug md:leading-normal">
            {{post.content}}
          </p>
          <p *ngFor="let tag of post.tags" class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">{{tag}}</p>
          <hr class="my-2">


            <img *ngIf="post.image" src="{{post.image}}" class="max-w-4xl mx-auto" alt="{{post.id}}">
          <div class="flex justify-between items-center mt-5">
            <div class="flex ">
              <svg class="p-0.5 h-6 w-6 rounded-full z-20 bg-white  " xmlns='http://www.w3.org/2000/svg'
                xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 16 16'>
                <defs>
                  <linearGradient id='a1' x1='50%' x2='50%' y1='0%' y2='100%'>
                    <stop offset='0%' stop-color='#18AFFF' />
                    <stop offset='100%' stop-color='#0062DF' />
                  </linearGradient>
                  <filter id='c1' width='118.8%' height='118.8%' x='-9.4%' y='-9.4%' filterUnits='objectBoundingBox'>
                    <feGaussianBlur in='SourceAlpha' result='shadowBlurInner1' stdDeviation='1' />
                    <feOffset dy='-1' in='shadowBlurInner1' result='shadowOffsetInner1' />
                    <feComposite in='shadowOffsetInner1' in2='SourceAlpha' k2='-1' k3='1' operator='arithmetic'
                      result='shadowInnerInner1' />
                    <feColorMatrix in='shadowInnerInner1'
                      values='0 0 0 0 0 0 0 0 0 0.299356041 0 0 0 0 0.681187726 0 0 0 0.3495684 0' />
                  </filter>
                  <path id='b1' d='M8 0a8 8 0 00-8 8 8 8 0 1016 0 8 8 0 00-8-8z' />
                </defs>
                <g fill='none'>
                  <use fill='url(#a1)' xlink:href='#b1' />
                  <use fill='black' filter='url(#c1)' xlink:href='#b1' />
                  <path fill='white'
                    d='M12.162 7.338c.176.123.338.245.338.674 0 .43-.229.604-.474.725a.73.73 0 01.089.546c-.077.344-.392.611-.672.69.121.194.159.385.015.62-.185.295-.346.407-1.058.407H7.5c-.988 0-1.5-.546-1.5-1V7.665c0-1.23 1.467-2.275 1.467-3.13L7.361 3.47c-.005-.065.008-.224.058-.27.08-.079.301-.2.635-.2.218 0 .363.041.534.123.581.277.732.978.732 1.542 0 .271-.414 1.083-.47 1.364 0 0 .867-.192 1.879-.199 1.061-.006 1.749.19 1.749.842 0 .261-.219.523-.316.666zM3.6 7h.8a.6.6 0 01.6.6v3.8a.6.6 0 01-.6.6h-.8a.6.6 0 01-.6-.6V7.6a.6.6 0 01.6-.6z' />
                </g>
              </svg>
              <span class="ml-1 text-gray-500   font-light">8</span>
            </div>
            <div class="ml-1 text-gray-500  font-light">33 comments</div>
          </div>
          <hr class="my-2">
          <div class="w-full grid grid-cols-2">
            <button class="py-2 hover:bg-gray-100 rounded-lg ">
              <div class="flex justify-center items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">
                  <path
                    d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2 2 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a10 10 0 0 0-.443.05 9.4 9.4 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a9 9 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.2 2.2 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.9.9 0 0 1-.121.416c-.165.288-.503.56-1.066.56z" />
                </svg>
                <span class="ml-1">Like</span>

              </div>
            </button>
            <button class="py-2 hover:bg-gray-100 rounded-lg ">
              <div class="flex justify-center items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat"
                  viewBox="0 0 16 16">
                  <path
                    d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105" />
                </svg>
                <span class="ml-1">Comment</span>

              </div>
            </button>


          </div>

        </div>
        
      </div>
    </main>
  </div>
</div>

<p-dialog header="Write a Post" class="bg-white" [(visible)]="visible" [style]="{width: '50vw'}">
  <div class="max-w-7xl mx-auto px-4">
    <div *ngIf="loading" class="h-2 w-full absolute top-0 left-0 bg-gradient-to-r from-blue-900 via-blue-800 to-primary background-animate"></div>
    <textarea [(ngModel)]="content" class="w-full h-32 border-2 border-gray-300 p-2 rounded-lg"
      placeholder="What's on your mind?"></textarea>

    <div class="items-center w-full max-w-7xl mx-auto mb-3  sm:flex sm:space-y-0">
      <div class="relative w-full">
        <div class="items-center justify-center mx-auto">
          <label *ngIf="!image" for="input"
            class="flex justify-center w-full h-16 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-gray-400 focus:outline-none"
            id="drop"><span class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg"
                class="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
              </svg><span class="font-medium text-gray-600">Drop files to Attach, or<span
                  class="text-blue-600 underline ml-[4px]">browse</span></span></span><input type="file"
              name="file_upload" (change)="onFileChange($event)"
              class="hidden" accept="image/png,image/jpeg" id="input"></label>
              <img src={{imagePreview}} alt="image" class="w-full" *ngIf="image">
        </div>
      </div>
    </div>

    <div class="my-4 flex flex-wrap max-w-7xl">

      <div *ngFor="let tag of tags">
        <span 
        (click)="selectTag(tag)"
        [ngClass]="{'bg-primary text-white': tag.selected, 'bg-gray-200': !tag.selected}"
        class="inline-flex m-2 items-center rounded-full px-2 py-1 text-xs font-medium border-2 hover:bg-gray-100">{{tag.value}}</span>
      </div>
    </div>

    <button (click)="addPost()" class="bg-primary hover:bg-blue-700 text-white w-full py-1 rounded-lg mt-2">Post</button>


  </div>

</p-dialog>